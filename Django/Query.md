### ORM  (Object-Relational-Mapping)
- 객체 지향 프로그래밍 언어를 사용하여 호환되지 않는 유형의 시스템 간의 데이터를 변환하는 기술
- Django와 DB간에 사용하는 언어가 다르기 때문에 소통 불가
- Django에 내장된 ORM이 중간에서 이를 해석
### QuerySet API
- ORM에서 데이터를 검색, 필터링, 정렬 및 그룹화 하는 데 사용하는 도구
  - API를 사용하여 SQL이 아닌 Python 코드로 데이터를 처리
#### Query
- 데이터베이스에 특정한 데이터를 보여 달라는 요청
- 쿼리문을 작성한다
  - 원하는 데이터를 얻기 위해 데이터베이스에 요청을 보낼 코드를 작성한다.
- 파이썬으로 작성한 코드가 ORM에 의해 SQL로 변환되어 데이터베이스에 전달되며, 데이터베이스의 응답 데이터를 ORM이 QuerySet이라는 자료 형태로 변환하여 우리에게 전달
#### QuerySet
- 데이터베이스에게서 전달 받은 객체 목록(데이터모음)
  - 순회가 가능한 데이터로써 1개 이상의 데이터를 불러와 사용할 수 있음
- Django ORM을 통해 만들어진 자료형
- 단, 데이터베이스가 단일한 객체를 반환 할 때는 QuerySet이 아닌 모델(Class)의 인스턴스로 반환됨
- Queryset API는 python의 모델 클래스와 인스턴스를 활용해 DB에 데이터를 저장, 조회, 수정, 삭제하는 것
### CRUD
- 소프트웨어가 가지는 기본적인 데이터 처리 기능
- Create(저장)
- Read(조회)
- Update(갱신)
- Delete(삭제)
#### Queryset api 실습
1. 외부 라이브러리 설치
    - pip install django-extensions ipython
    - setiings.py에 'django_extensions'추가
    - pip freeze > requirements.txt
    - python manage.py shell_plus 실행
    - Django 환경 안에서 실행되는 python shell
- save()
  - 객체를 데이터베이스에 저장하는 인스턴스 메서드
#### Read()
- Return new QuerySets
  - all() : 전체 데이터 조회
  - filter() : 주어진 매개변수와 일치하는 객체를 포함하는 QuerySet 반환
- Do not return QeurySets
  - get() : 주어진 매개변수와 일치하는 객체를 반환
    - 객체를 찾을 수 없으면 DoesNotExist 예외를 발생시키고, 둘 이상의 객체를 찾으면 MultipleObjectsReturned 예외를 발생시킴
    - 위와 같은 특징을 가지고 있기 때문에 primary key와 같이 고유성(uniqueness)을 보장하는 조회에서 사용해야 함
#### update
- 인스턴스 변수를 변경 후 save 메서드를 호출
#### delete
- 삭제하려는 데이터 조회 후 delete 메서드 호출
### 참고
#### filter
- gt, gte, lt, lte = 초과, 이상, 미만, 이하
#### ORM, Query set 사용하는 이요
1. 데이터베이스 추상화
    - 개발자는 특정 데이터베이스 시스템에 종속되지 않고 일관된 방식으로 데이터를 다룰 수 있음
2. 생산성 향상
    - 복잡한 SQL 쿼리를 직접 작성하는 대신 Python 코드로 데이터베이스 작업을 수행할 수 있음
3. 객체 지향적 접근
    - 데이터베이스 테이블을 Python 객체로 다룰 수 있어 객체 프로그래밍의 이점을 활용할 수 있음
#### Create
- new
  - 사용자 입력 데이터를 받을 페이지를 렌더링
- create
  - 사용자가 입력한 요청 데이터를 받아 DB에 저장
#### HTTP request methods
- HTTP : 네트워크 상에서 데이터를 주고 받기위한 약속
- 데이터에 대해 수행을 원하는 작업을 나타내는 것
  - 서버에게 원하는 작업의 종류를 알려주는 역할
- 클라이언트가 웹 서버에 특정 동작을 요청하기 위해 사용하는 표준 명령어
- 대표 메서드
  - GET, POST
##### GET 메서드
- 서버로부터 데이터를 요청하고 받아오는 데 사용
- 특징
  1. 데이터 전송
    - URL의 쿼리 문자열을 통해 데이터 전송
  2. 데이터 제한
    - URL 길이에 제한이 있어 대량의 데이터 전송에는 적합하지 않음
  3. 브라우저 히스토리
    - 요청 URL이 브라우저 히스토리에 남음
  4. 캐싱
    - 브라우저는 GET요청의 응답을 로컬에 저장할 수 있음
    - 동일한 URL로 다시 요청할 때, 서버에 접속하지 않고 저장된 결과를 사용
    - 페이지 로딩 시간 크게 단축
##### Post 메서드
- 서버에 데이터를 제출하여 리소스를 변경(생성, 수정, 삭제)하는데 사용
1. 데이터 전송
  - HTTP body를 통해 데이터를 전송
2. 데이터 제한
  - GET에 비해 더 많은 양의 데이터를 전송할 수 있음
3. 브라우저 히스토리
  - POST 요청은 브라우저 히스토리에 남지 않음
4. 캐싱
  - POST 요청은 기본적으로 캐시 할 수 없음
  - POST 요청이 일반적으로 서버의 상태를 변경하는 작업을 수행함

- GET은 데이터 조회, POST는 데이터 생성, 수정에 사용
#### CSRF Cross-Site-Request-Forgery
- 사이트 간 요청 위조
- 사용자가 자신의 의지와 무관하게 공격자가 의도한 행동을 해 특정 웹 사이트를 보안에 취약하게 하거나 수정, 삭제 등의 작업을 하게 만드는 공격 방법
- 토큰 보내야하는 이유
  - django가 직접 페이지에서 데이터를 작성하는 것인지 확인하는 것
- POST일때만 token 확인하는 이유는 POST가 데이터베이스에 대한 변경을 요청하기 때문에 최소한의 신원 확인을 하는 것
#### Redirect
- 서버는 데이터 저장 후 페이지를 응답하는 것이 아닌 사용자를 적절한 기존 페이지로 보내야함
  - 실제로 서버가 클라이언트를 직접 다른 페이지로 보내는 것이 아닌 클라이언트가 GET 요청을 한번 더 보내도록 응답하는 것
- 클라이언트가 인자에 작성된 주소로 다시 요청을 보내도록 하는 함수
1. redirect 응답을 받은 클라이언트는 detail url로 다시 요청 보냄
2. 결과적으로 detail view 함수가 호출되어 detail view 함수의 반환 결과인 detail 페이지를 응답 받게 됨
#### Delete
#### Update
- 사용자의 입력 데이터를 받을 페이지를 렌더링 edit
- 사용자가 입력한 데이터를 받아 DB에 저장 update